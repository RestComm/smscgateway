					<h3 style="margin: 0px;"><i class="icon-globe"></i> HTTP settings</h3>
					<hr style="margin: 10 0px;"/>
					
					<link href="resources/css/bootstrap-slider.css" rel="stylesheet">
					<script type="text/javascript" src="resources/js/bootstrap-slider.js"></script>
					<script type="text/javascript" src="resources/js/jquery-knob.js"></script>
					
					
					<p>
						<br/>
					</p> 
					
					<div class="alert alert-error" id="login-settings-error" style="display:none;">
					  <button type="button" class="close">&times;</button>
					  Some Fields are not correctly filled out, please double check the settings below !
					</div>
					

					<h5>Default values for incoming messages from HTTP connector</h5>						
					<div id="dbrr-update-configuration-wrapper">
						<div class="input-prepend">
							<div id="div-httpdefaultsourceton" class="control-group">
							<span id="httpdefaultsourceton-span" class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default TON value for source addresses for messages from HTTP connector">
								<span class="add-on">Default source addresses TON</span>
								<select id="httpdefaultsourceton" style="width: 400px;">
									<option value="-2">-2 : Autodetect - international / alphanumerical</option>
									<option value="-1">-1 : Autodetect (international / national / alphanumerical)</option>
									<option value="0">0 : Unknown</option>
									<option value="1">1 : International</option>
									<option value="2">2 : National</option>
									<option value="3">3 : Network Specific</option>
									<option value="4">4 : Subscriber Number</option>
									<option value="5">5 : Alphanumeric</option>
									<option value="6">6 : Abbreviated</option>
									<option value="7">7 : Reserved</option>
								</select>
							</span>
							</div>
							<div id="div-httpdefaultsourcenpi" class="control-group">
							<span id="httpdefaultsourcenpi-span" class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default NPI value for source addresses for messages from HTTP connector, -1: autodetect (international / national / alphanumerical), -2: autodetect - international / alphanumerical">
								<span class="add-on">Default source addresses NPI</span>
								<select id="httpdefaultsourcenpi" style="width: 400px;">
									<option value="-2">-2 : Autodetect - international / alphanumerical</option>
									<option value="-1">-1 : Autodetect (international / national / alphanumerical)</option>
									<option value="0">0 : Unknown</option>
									<option value="1">1 : ISDN (E163/E164)</option>
									<option value="3">3 : Data (X.121)</option>
									<option value="4">4 : Telex (F.69)</option>
									<option value="6">6 : Land Mobile (E.212)</option>
									<option value="8">8 : National</option>
									<option value="9">9 : Private</option>
									<option value="10">10 : ERMES</option>
									<option value="14">14 : Internet (IP)</option>
									<option value="18">18 : WAP Client Id</option>
								</select>
							</span>
							</div>

							// ...............................

							<div id="div-httpdefaultdestton" class="control-group">
							<span id="httpdefaultdestton-span" class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default TON value for destination addresses for messages from HTTP connector">
								<span class="add-on">Default destination addresses TON</span>
								<select id="httpdefaultdestton" style="width: 400px;">
									<option value="0">0 : Unknown</option>
									<option value="1">1 : International</option>
									<option value="2">2 : National</option>
									<option value="3">3 : Network Specific</option>
									<option value="4">4 : Subscriber Number</option>
									<option value="5">5 : Alphanumeric</option>
									<option value="6">6 : Abbreviated</option>
									<option value="7">7 : Reserved</option>
								</select>
							</span>
							</div>
							<div id="div-httpdefaultdestnpi" class="control-group">
							<span id="httpdefaultdestnpi-span" class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default NPI value for destination addresses for messages from HTTP connector">
								<span class="add-on">Default destination addresses NPI</span>
								<select id="httpdefaultdestnpi" style="width: 400px;">
									<option value="0">0 : Unknown</option>
									<option value="1">1 : ISDN (E163/E164)</option>
									<option value="3">3 : Data (X.121)</option>
									<option value="4">4 : Telex (F.69)</option>
									<option value="6">6 : Land Mobile (E.212)</option>
									<option value="8">8 : National</option>
									<option value="9">9 : Private</option>
									<option value="10">10 : ERMES</option>
									<option value="14">14 : Internet (IP)</option>
									<option value="18">18 : WAP Client Id</option>
								</select>
							</span>
							</div>

							<div id="div-httpdefaultnetworkid" class="control-group">
							<span id="httpdefaultnetworkid-span" class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default networkId area for messages from HTTP connector">
								<span class="add-on">Default networkId area</span>
								<input id="httpdefaultnetworkid" type="text" class="input-mini" style="width: 220px; margin-right: 12px; text-align: center;" value="" />
							</span>
							</div>

							<div id="div-httpdefaultmessagingmode" class="control-group">
								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default messaging mode for messages from HTTP connector">
									<span class="add-on">Default messaging mode</span>
									<select id="httpdefaultmessagingmode" >
										<option value="0">Default SMSC mode</option>
										<option value="1">Datagram</option>
										<option value="3">StoreAndForward</option>
									</select>
								</span>
							</div>

							<div id="div-httpdefaultrddeliveryreceipt" class="control-group">
								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default delivery receipt requests for messages from HTTP connector">
									<span class="add-on">Default delivery receipt requests</span>
									<select id="httpdefaultrddeliveryreceipt" >
										<option value="0">No</option>
										<option value="1">On success or failure</option>
										<option value="2">On failure only</option>
										<option value="3">On success only</option>
									</select>
								</span>
							</div>

							<div id="div-httpdefaultrdintermediatenotification" class="control-group">
								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default intermediate delivery notification requests for messages from HTTP connector">
									<span class="add-on">Default intermediate delivery notification requests</span>
									<select id="httpdefaultrdintermediatenotification" >
										<option value="0">No</option>
										<option value="1">Yes</option>
									</select>
								</span>
							</div>

							<div id="div-httpdefaultdatacoding" class="control-group">
							<span id="httpdefaultdatacoding-span" class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="Default data coding schema for messages from HTTP connector. Common values: 0-GSM7, 8-UCS2">
								<span class="add-on">Default data coding schema</span>
								<input id="httpdefaultdatacoding" type="text" class="input-mini" style="width: 220px; margin-right: 12px; text-align: center;" value="" />
							</span>
							</div>
						</div>
					</div>
					
					<h5>Default values for incoming messages from HTTP connector</h5>						
					<div id="dbrr-update-configuration-wrapper-2">
						<div id="div-httpencodingforgsm7" class="control-group">
							<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="used to set the HTTP message content encoding for data coding schema [0] (GSM7).">
								<span class="add-on">HTTP Encoding for GSM7</span>
								<select id="httpencodingforgsm7" >
									<option>Utf8</option>
									<option>Unicode</option>
								</select>
							</span>
						</div>

						<div id="div-httpencodingforucs2" class="control-group">
							<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="used to set the HTTP message content encoding for data coding schema [8] (UCS2).">
								<span class="add-on">HTTP Encoding for UCS2</span>
								<select id="httpencodingforucs2" >
									<option>Utf8</option>
									<option>Unicode</option>
								</select>
							</span>
						</div>

						<div class="control-group">
							<span class="span12" style="text-align: left;">
								&nbsp;<button class="btn btn-danger" onclick="updateProperties();"><i class="icon-undo"></i> Revert</button>
								&nbsp;<button class="btn btn-primary" onclick="applyProperties();"><i class="icon-save"></i> Save</button>
							</span>
						</div>								
					</div>


					
				<script type="text/javascript">
					$('#login-settings-error .close').on("click", function(e) {
					    $(this).parent().hide();
					});

					function updateProperties(){
						mbeanSearch="org.mobicents.smsc:layer=SmscPropertiesManagement,name=SmscManagement";
						jolokia.request(
								[
									{ type: "read", mbean: mbeanSearch },
								],
								{ success: [
									function(response) {
										var httpDefaultSourceTon = response.value.HttpDefaultSourceTon;
										if(httpDefaultSourceTon == -2){
											httpdefaultsourceton.options[0].selected = true;
										} else if(httpDefaultSourceTon == -1){ 
											httpdefaultsourceton.options[1].selected = true;
										} else if(httpDefaultSourceTon == 0){ 
											httpdefaultsourceton.options[2].selected = true;
										} else if(httpDefaultSourceTon == 1){ 
											httpdefaultsourceton.options[3].selected = true;
										} else if(httpDefaultSourceTon == 2){ 
											httpdefaultsourceton.options[4].selected = true;
										} else if(httpDefaultSourceTon == 3){ 
											httpdefaultsourceton.options[5].selected = true;
										} else if(httpDefaultSourceTon == 4){ 
											httpdefaultsourceton.options[6].selected = true;
										} else if(httpDefaultSourceTon == 5){ 
											httpdefaultsourceton.options[7].selected = true;
										} else if(httpDefaultSourceTon == 6){ 
											httpdefaultsourceton.options[8].selected = true;
										} else {
											httpdefaultsourceton.options[9].selected = true;
										}										

										var httpDefaultSourceNpi = response.value.HttpDefaultSourceNpi;
										if(httpDefaultSourceNpi == -2){
											httpdefaultsourcenpi.options[0].selected = true;
										} else if(httpDefaultSourceNpi == -1){ 
											httpdefaultsourcenpi.options[1].selected = true;
										} else if(httpDefaultSourceNpi == 0){ 
											httpdefaultsourcenpi.options[2].selected = true;
										} else if(httpDefaultSourceNpi == 1){ 
											httpdefaultsourcenpi.options[3].selected = true;
										} else if(httpDefaultSourceNpi == 3){ 
											httpdefaultsourcenpi.options[4].selected = true;
										} else if(httpDefaultSourceNpi == 4){ 
											httpdefaultsourcenpi.options[5].selected = true;
										} else if(httpDefaultSourceNpi == 6){ 
											httpdefaultsourcenpi.options[6].selected = true;
										} else if(httpDefaultSourceNpi == 8){ 
											httpdefaultsourcenpi.options[7].selected = true;
										} else if(httpDefaultSourceNpi == 9){ 
											httpdefaultsourcenpi.options[8].selected = true;
										} else if(httpDefaultSourceNpi == 10){ 
											httpdefaultsourcenpi.options[9].selected = true;
										} else if(httpDefaultSourceNpi == 14){ 
											httpdefaultsourcenpi.options[10].selected = true;
										} else if(httpDefaultSourceNpi == 18){ 
											httpdefaultsourcenpi.options[11].selected = true;
										} else {
											httpdefaultsourcenpi.options[12].selected = true;
										}										

										var httpDefaultDestTon = response.value.HttpDefaultDestTon;
										if(httpDefaultDestTon == 0){ 
											httpdefaultdestton.options[0].selected = true;
										} else if(httpDefaultDestTon == 1){ 
											httpdefaultdestton.options[1].selected = true;
										} else if(httpDefaultDestTon == 2){ 
											httpdefaultdestton.options[2].selected = true;
										} else if(httpDefaultDestTon == 3){ 
											httpdefaultdestton.options[3].selected = true;
										} else if(httpDefaultDestTon == 4){ 
											httpdefaultdestton.options[4].selected = true;
										} else if(httpDefaultDestTon == 5){ 
											httpdefaultdestton.options[5].selected = true;
										} else if(httpDefaultDestTon == 6){ 
											httpdefaultdestton.options[6].selected = true;
										} else {
											httpdefaultdestton.options[7].selected = true;
										}										

										var httpDefaultDestNpi = response.value.HttpDefaultDestNpi;
										if(httpDefaultDestNpi == 0){ 
											httpdefaultdestnpi.options[0].selected = true;
										} else if(httpDefaultDestNpi == 1){ 
											httpdefaultdestnpi.options[1].selected = true;
										} else if(httpDefaultDestNpi == 3){ 
											httpdefaultdestnpi.options[2].selected = true;
										} else if(httpDefaultDestNpi == 4){ 
											httpdefaultdestnpi.options[3].selected = true;
										} else if(httpDefaultDestNpi == 6){ 
											httpdefaultdestnpi.options[4].selected = true;
										} else if(httpDefaultDestNpi == 8){ 
											httpdefaultdestnpi.options[5].selected = true;
										} else if(httpDefaultDestNpi == 9){ 
											httpdefaultdestnpi.options[6].selected = true;
										} else if(httpDefaultDestNpi == 10){ 
											httpdefaultdestnpi.options[7].selected = true;
										} else if(httpDefaultDestNpi == 14){ 
											httpdefaultdestnpi.options[8].selected = true;
										} else if(httpDefaultDestNpi == 18){ 
											httpdefaultdestnpi.options[9].selected = true;
										} else {
											httpdefaultdestnpi.options[10].selected = true;
										}										
										
										$("#httpdefaultnetworkid").val(response.value.HttpDefaultNetworkId);
										$("#httpdefaultdatacoding").val(response.value.HttpDefaultDataCoding);

										var httpDefaultMessagingMode = response.value.HttpDefaultMessagingMode;
										if(httpDefaultMessagingMode == 0){
											httpdefaultmessagingmode.options[0].selected = true;
										} else if(httpDefaultMessagingMode == 1){ 
											httpdefaultmessagingmode.options[1].selected = true;
										} else { 
											httpdefaultmessagingmode.options[2].selected = true;
										}										

										var httpDefaultRDDeliveryReceipt = response.value.HttpDefaultRDDeliveryReceipt;
										if(httpDefaultRDDeliveryReceipt == 0){
											httpdefaultrddeliveryreceipt.options[0].selected = true;
										} else if(httpDefaultRDDeliveryReceipt == 1){ 
											httpdefaultrddeliveryreceipt.options[1].selected = true;
										} else if(httpDefaultRDDeliveryReceipt == 2){ 
											httpdefaultrddeliveryreceipt.options[2].selected = true;
										} else { 
											httpdefaultrddeliveryreceipt.options[3].selected = true;
										}										

										var httpDefaultRDIntermediateNotification = response.value.HttpDefaultRDIntermediateNotification;
										if(httpDefaultRDIntermediateNotification == 0){
											httpdefaultrdintermediatenotification.options[0].selected = true;
										} else { 
											httpdefaultrdintermediatenotification.options[1].selected = true;
										}										

										var httpEncodingForGsm7 = response.value.HttpEncodingForGsm7;
										if(httpEncodingForGsm7 == "Utf8"){
											httpencodingforgsm7.options[0].selected = true;
										} else { 
											httpencodingforgsm7.options[1].selected = true;
										}										

										var httpEncodingForUCS2 = response.value.HttpEncodingForUCS2;
										if(httpEncodingForUCS2 == "Utf8"){
											httpencodingforucs2.options[0].selected = true;
										} else { 
											httpencodingforucs2.options[1].selected = true;
										}										
									}],
									error: function(value) {
										errorUID = ("st" + new Date().getTime()).hashCode();
										createStackTrace(errorUID, value.stacktrace);
										logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");										
									} 
								}
							);						
					}

					function applyProperties() {
						var formInvalid = false;

						var httpdefaultsourceton = $("#httpdefaultsourceton").val();
						if(httpdefaultsourceton.trim() == "") {
			    			$("#div-httpdefaultsourceton").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpdefaultsourceton").hasClass("error")) {
			    			$("#div-httpdefaultsourceton").removeClass("error");		
			    		}
						
						var httpdefaultsourcenpi = $("#httpdefaultsourcenpi").val();
						if(httpdefaultsourcenpi.trim() == "") {
			    			$("#div-httpdefaultsourcenpi").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpdefaultsourcenpi").hasClass("error")) {
			    			$("#div-httpdefaultsourcenpi").removeClass("error");		
			    		}
						
						var httpdefaultdestton = $("#httpdefaultdestton").val();
						if(httpdefaultdestton.trim() == "") {
			    			$("#div-httpdefaultdestton").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpdefaultdestton").hasClass("error")) {
			    			$("#div-httpdefaultdestton").removeClass("error");		
			    		}
						
						var httpdefaultdestnpi = $("#httpdefaultdestnpi").val();
						if(httpdefaultdestnpi.trim() == "") {
			    			$("#div-httpdefaultdestnpi").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpdefaultdestnpi").hasClass("error")) {
			    			$("#div-httpdefaultdestnpi").removeClass("error");		
			    		}
						
						var httpdefaultnetworkid = $("#httpdefaultnetworkid").val();
						if(httpdefaultnetworkid.trim() == "") {
			    			$("#div-httpdefaultnetworkid").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpdefaultnetworkid").hasClass("error")) {
			    			$("#div-httpdefaultnetworkid").removeClass("error");		
			    		}
						
						var httpdefaultdatacoding = $("#httpdefaultdatacoding").val();
						if(httpdefaultdatacoding.trim() == "") {
			    			$("#div-httpdefaultdatacoding").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpdefaultdatacoding").hasClass("error")) {
			    			$("#div-httpdefaultdatacoding").removeClass("error");		
			    		}

						var httpencodingforgsm7 = $("#httpencodingforgsm7").val();
						if(httpencodingforgsm7.trim() == "") {
			    			$("#div-httpencodingforgsm7").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpencodingforgsm7").hasClass("error")) {
			    			$("#div-httpencodingforgsm7").removeClass("error");		
			    		}

						var httpencodingforucs2 = $("#httpencodingforucs2").val();
						if(httpencodingforucs2.trim() == "") {
			    			$("#div-httpencodingforucs2").addClass("error");					    			
			    			formInvalid = true;
			    		} else if($("#div-httpencodingforucs2").hasClass("error")) {
			    			$("#div-httpencodingforucs2").removeClass("error");		
			    		}


						if(formInvalid) {
							$("#login-settings-error").show();
							logToConsole("ERROR", "Some Fields are not correctly filled out, please double check the settings !");
							return false;
						} else {
							$("#login-settings-error").hide();
						}

						var e = document.getElementById("httpdefaultmessagingmode");
						var httpDefaultMessagingMode = e.options[e.selectedIndex].value;

						var e = document.getElementById("httpdefaultrddeliveryreceipt");
						var httpDefaultRDDeliveryReceipt = e.options[e.selectedIndex].value;

						var e = document.getElementById("httpdefaultrdintermediatenotification");
						var httpDefaultRDIntermediateNotification = e.options[e.selectedIndex].value;
						
						mbeanSearch="org.mobicents.smsc:layer=SmscPropertiesManagement,name=SmscManagement";
						jolokia.request(
								[
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultSourceTon", value: httpdefaultsourceton},
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultSourceNpi", value: httpdefaultsourcenpi },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultDestTon", value: httpdefaultdestton},
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultDestNpi", value: httpdefaultdestnpi },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultNetworkId", value: httpdefaultnetworkid },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultMessagingMode", value: httpDefaultMessagingMode },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultRDDeliveryReceipt", value: httpDefaultRDDeliveryReceipt },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultRDIntermediateNotification", value: httpDefaultRDIntermediateNotification },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpDefaultDataCoding", value: httpdefaultdatacoding },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpEncodingForGsm7", value: httpencodingforgsm7 },
									{ type: "write", mbean: mbeanSearch, attribute: "HttpEncodingForUCS2", value: httpencodingforucs2 },
								],
								{
									success: function(response) {
										logToConsole("INFO", "SMSC Gateway Properties successfully updated.");
									},
									error: function(response) {
										logToConsole("ERROR", "Failure trying to communicate with the RestComm SMSC Gateway. Please try again later.");
									} 
								}
							);
									
					}

					$(document).ready(function () {
						updateProperties();
					});
				</script>
